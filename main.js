(()=>{"use strict";const t=class{constructor(t){this.name=t,this.gameboard=new e}randomShipPlacement=()=>{this.gameboard.ships.forEach((t=>{let e=Math.floor(10*Math.random())+1,r=Math.floor(10*Math.random())+1,i=Math.random()>.5?"x":"y";for(;!1===t.placed;)this.gameboard.placeShip(t,e,r,i),e=Math.floor(10*Math.random())+1,r=Math.floor(10*Math.random())+1,i=Math.random()>.5?"x":"y"}))};randomAttack=()=>{}};document.querySelectorAll(".drag-item").forEach((t=>{t.addEventListener("dragstart",(e=>{t.classList.add("dragging"),e.dataTransfer.setData("ShipName",e.target.id),e.dataTransfer.setData("ShipAxis",e.target.getAttribute("data-axis"))}))})),document.querySelectorAll(".drag-item").forEach((t=>{t.addEventListener("dragend",(()=>{t.classList.remove("dragging")}))}));document.querySelector("#rotate-btn").addEventListener("click",(()=>{(()=>{const t=document.querySelector("#rotate-btn");"x"==t.getAttribute("data-rotation")?((()=>{const t=document.querySelector("#ships-container");t.querySelectorAll(".drag-item").forEach((t=>{const e=t.offsetWidth;t.style.height=e/16+"rem",t.style.width="2.5rem",t.style.flexDirection="column",t.setAttribute("data-axis","y")})),t.style.flexDirection="row"})(),t.setAttribute("data-rotation","y")):((()=>{const t=document.querySelector("#ships-container");t.querySelectorAll(".drag-item").forEach((t=>{const e=t.offsetHeight;t.style.height="2.5rem",t.style.width=e/16+"rem",t.style.flexDirection="row",t.setAttribute("data-axis","x")})),t.style.flexDirection="column"})(),t.setAttribute("data-rotation","x"))})()}));const e=class{constructor(){this.grid=this.createGrid(),this.ships=this.createShips()}createShips=()=>[{name:"carrier",length:5},{name:"battleship",length:4},{name:"destroyer",length:3},{name:"submarine",length:3},{name:"patrol-boat",length:2}].map((t=>new class{constructor(t,e){this.name=t,this.length=e,this.sunk=!1,this.sectionsHit=Array(e).fill(""),this.placed=!1}hit=t=>{this.sectionsHit[t-1]="x",this.isSunk()};isSunk=()=>{this.sectionsHit.every((t=>"x"==t))&&(this.sunk=!0)}}(t.name,t.length)));createGrid=()=>{const t=[];for(let e=0;e<10;e++){t.push([]);for(let r=0;r<10;r++)t[e].push("")}return t};placeShip=(t,e,r,i)=>{const a=r-1,s=e-1;if(this.checkForEnoughSpace(a,s,t.length,i)&&this.checkForExistingShip(a,s,t.length,i)){for(let e=0;e<t.length;e++)"x"==i?this.grid[s][a+e]={ship:t,position:e+1}:"y"==i&&(this.grid[s+e][a]={ship:t,position:e+1});return t.placed=!0,!0}};checkForExistingShip=(t,e,r,i)=>{if("x"==i)return this.grid[e].slice(t,t+r).every((t=>""==t));if("y"==i){const i=[];for(let a=0;a<r;a++)i.push(this.grid[e+a][t]);return i.every((t=>""==t))}};checkForEnoughSpace=(t,e,r,i)=>"x"==i?this.grid[e].slice(t,t+r).length==r:"y"==i?e+r<=10:void 0;receiveAttack=(t,e)=>{const r=e-1,i=t-1;if("object"==typeof this.grid[i][r]){const t=this.grid[i][r].ship,e=this.grid[i][r].position;t.hit(e)}else this.grid[i][r]="x"};checkAllShipsSunk=()=>this.ships.every((t=>t.sunk))},r=new t("Jon"),i=new t("CPU");i.randomShipPlacement();const a=t=>{for(let e=1;e<=10;e++)for(let i=1;i<=10;i++){const a=document.createElement("div");a.setAttribute("xy-coord",`${i}-${e}`),a.addEventListener("dragover",(t=>{t.preventDefault()})),a.addEventListener("drop",(t=>{const e=t.dataTransfer.getData("ShipName"),i=t.dataTransfer.getData("ShipAxis"),o=s(e),[n,c]=a.getAttribute("xy-coord").split("-");if(r.gameboard.placeShip(o,c,n,i)){const t=document.querySelector(".dragging");a.appendChild(t)}console.log(r)})),t.appendChild(a)}},s=t=>r.gameboard.ships.find((e=>e.name==t));document.querySelectorAll(".drag-item").forEach((t=>{t.addEventListener("dragstart",(e=>{t.classList.add("dragging"),e.dataTransfer.setData("ShipName",e.target.id),e.dataTransfer.setData("ShipAxis",e.target.getAttribute("data-axis"))}))})),document.querySelectorAll(".drag-item").forEach((t=>{t.addEventListener("dragend",(()=>{t.classList.remove("dragging")}))})),a(document.querySelector("#gameboard-1")),a(document.querySelector("#gameboard-2"));document.querySelector("#rotate-btn").addEventListener("click",(()=>{(()=>{const t=document.querySelector("#rotate-btn");"x"==t.getAttribute("data-rotation")?((()=>{const t=document.querySelector("#ships-container");t.querySelectorAll(".drag-item").forEach((t=>{const e=t.offsetWidth;t.style.height=e/16+"rem",t.style.width="2.5rem",t.style.flexDirection="column",t.setAttribute("data-axis","y")})),t.style.flexDirection="row"})(),t.setAttribute("data-rotation","y")):((()=>{const t=document.querySelector("#ships-container");t.querySelectorAll(".drag-item").forEach((t=>{const e=t.offsetHeight;t.style.height="2.5rem",t.style.width=e/16+"rem",t.style.flexDirection="row",t.setAttribute("data-axis","x")})),t.style.flexDirection="column"})(),t.setAttribute("data-rotation","x"))})()})),console.log(i)})();